FROM python:3.9.13-slim-buster
  
# Add Arkouda files
ARG ARKOUDA_DIST_FOLDER=${ARKOUDA_DIST_FOLDER}
ENV ARKOUDA_DIST_FOLDER=${ARKOUDA_DIST_FOLDER}

ADD arkouda.tar.gz /opt/
RUN mv -v /opt/$ARKOUDA_DIST_FOLDER /opt/arkouda
WORKDIR /opt/arkouda

# Execute Arkouda pip install
RUN pip install --upgrade pip
RUN pip install -e .[dev]

# Remove unneeded files
RUN rm -rf /opt/arkouda/src
RUN rm -rf /opt/arkouda-tar.gz

EXPOSE 5080

ENTRYPOINT python3 arkouda/monitoring.py
