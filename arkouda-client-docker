FROM python:3.7.7-slim-buster

# Add Arkouda files
ARG ARKOUDA_DIST_FOLDER=${ARKOUDA_DIST_FOLDER}
ENV ARKOUDA_DIST_FOLDER=${ARKOUDA_DIST_FOLDER}

ADD arkouda.tar.gz /opt/
RUN mv -v /opt/$ARKOUDA_DIST_FOLDER /opt/arkouda
WORKDIR /opt/arkouda

# Execute Arkouda pip install and remove src folder
RUN pip install --upgrade pip
RUN pip install .[dev]

WORKDIR /opt

RUN rm -rf /opt/arkouda
